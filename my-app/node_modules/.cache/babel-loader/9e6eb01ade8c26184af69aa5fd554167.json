{"ast":null,"code":"import axios from '../config/axios';\nimport Swal from 'sweetalert2';\nimport { startAddStock, startRemoveStock } from './stock';\n\nconst getProducts = products => {\n  return {\n    type: 'PRODUCTS_LIST',\n    payload: products\n  };\n};\n\nconst addProduct = product => {\n  return {\n    type: 'ADD_PRODUCT',\n    payload: product\n  };\n};\n\nconst updateProduct = (id, product) => {\n  return {\n    type: 'UPDATE_PRODUCT',\n    payload: {\n      id,\n      product\n    }\n  };\n};\n\nconst removeProduct = id => {\n  return {\n    type: 'REMOVE_PRODUCT',\n    payload: id\n  };\n};\n\nexport const startListProducts = () => {\n  return dispatch => {\n    axios.get('/products').then(response => {\n      // console.log(response)\n      if (response.data) {\n        dispatch(getProducts(response.data));\n      }\n    }).catch(err => {\n      console.log('error products', err); // history.push('/')\n    });\n  };\n};\nexport const startAddProduct = data => {\n  return dispatch => {\n    axios.post(`/products`, data, {\n      headers: {\n        'x-auth': localStorage.getItem('authToken')\n      }\n    }).then(res => {\n      if (res.data.errors) {\n        Swal.fire({\n          type: 'error',\n          text: \"Check the fileds\"\n        });\n      } else {\n        const product = res.data;\n        dispatch(addProduct(product));\n        console.log('dsasd', product);\n        const stock = {};\n        stock.product = product._id;\n        stock.quantity = 0;\n        stock.stockPrice = 0;\n        dispatch(startAddStock(stock, product));\n      }\n    }).catch(err => {\n      Swal.fire({\n        type: 'error',\n        text: err\n      });\n    });\n  };\n};\nexport const startUpdateProduct = (id, data, history) => {\n  return dispatch => {\n    axios.put(`/products/edit/${id}`, data, {\n      headers: {\n        'x-auth': localStorage.getItem('authToken')\n      }\n    }).then(res => {\n      if (res.data.errors) {\n        Swal.fire({\n          type: 'error',\n          text: \"Check the fileds\"\n        });\n      } else {\n        dispatch(updateProduct(res.data._id, res.data)); // history.push('/products')\n\n        window.location.reload();\n      }\n    }).catch(err => {\n      Swal.fire({\n        type: 'error',\n        text: err\n      });\n    });\n  };\n};\nexport const startRemoveProduct = id => {\n  return dispatch => {\n    axios.delete(`/products/${id}`, {\n      headers: {\n        'x-auth': localStorage.getItem('authToken')\n      }\n    }).then(res => {\n      dispatch(removeProduct(res.data._id));\n      dispatch(startRemoveStock(res.data._id));\n    }).catch(err => {\n      Swal.fire({\n        type: 'error',\n        text: err\n      });\n    });\n  };\n};","map":{"version":3,"sources":["C:/Users/Rubi Singh/meanstark/nodeexpress/billing/my-app/src/actions/product.js"],"names":["axios","Swal","startAddStock","startRemoveStock","getProducts","products","type","payload","addProduct","product","updateProduct","id","removeProduct","startListProducts","dispatch","get","then","response","data","catch","err","console","log","startAddProduct","post","headers","localStorage","getItem","res","errors","fire","text","stock","_id","quantity","stockPrice","startUpdateProduct","history","put","window","location","reload","startRemoveProduct","delete"],"mappings":"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","sourcesContent":["import axios from '../config/axios'\nimport Swal from 'sweetalert2'\nimport { startAddStock, startRemoveStock } from './stock'\n\n\nconst getProducts = (products) => {\n    return {\n        type: 'PRODUCTS_LIST', payload: products\n    }\n}\nconst addProduct = (product)=>{\n    return {\n        type: 'ADD_PRODUCT',payload: product\n    }\n}\nconst updateProduct = (id,product)=>{\n    return {\n        type: 'UPDATE_PRODUCT',payload: {id,product}\n    }\n}\nconst removeProduct = (id)=>{\n    return {\n        type: 'REMOVE_PRODUCT',payload: id\n    }\n}\nexport const startListProducts = () => {\n    return (dispatch) => {\n        axios.get('/products')\n            .then(response => {\n                // console.log(response)\n                if (response.data) {\n                    dispatch(getProducts(response.data))\n                }\n            })\n            .catch(err => {\n                console.log('error products', err)\n                // history.push('/')\n            })\n    }\n}\nexport const startAddProduct = (data) => {\n    return (dispatch) => {\n        axios.post(`/products`,data,{\n            headers: {\n                'x-auth': localStorage.getItem('authToken')\n            }\n        })\n        .then(res => {\n            if(res.data.errors){\n                Swal.fire({\n                    type: 'error',\n                    text: \"Check the fileds\"\n                })\n            }else{\n                const product = res.data;\n                dispatch(addProduct(product))\n                console.log('dsasd', product);\n                const stock = {}\n                stock.product = product._id;\n                stock.quantity = 0;\n                stock.stockPrice = 0;\n                dispatch(startAddStock(stock, product))\n            }\n        })\n        .catch(err => {\n            Swal.fire({\n                type: 'error',\n                text: err\n            })\n            \n        })\n    }\n}\nexport const startUpdateProduct = (id,data,history) => {\n    return (dispatch) => {\n        axios.put(`/products/edit/${id}`,data,{\n            headers: {\n                'x-auth': localStorage.getItem('authToken')\n            }\n        })\n        .then(res => {\n            if(res.data.errors){\n                Swal.fire({\n                    type: 'error',\n                    text: \"Check the fileds\"\n                })\n            }else{\n                dispatch(updateProduct(res.data._id,res.data))\n                // history.push('/products')\n                window.location.reload()\n            }\n        })\n        .catch(err => {\n            Swal.fire({\n                type: 'error',\n                text: err\n            })\n        })\n    }\n}\nexport const startRemoveProduct = (id) => {\n    return (dispatch) => {\n        axios.delete(`/products/${id}`,{\n            headers: {\n                'x-auth': localStorage.getItem('authToken')\n            }\n        })\n        .then(res => {\n            dispatch(removeProduct(res.data._id))\n            dispatch(startRemoveStock(res.data._id))\n        })\n        .catch(err => {\n            Swal.fire({\n                type: 'error',\n                text: err\n            })\n        })\n    }\n}"]},"metadata":{},"sourceType":"module"}