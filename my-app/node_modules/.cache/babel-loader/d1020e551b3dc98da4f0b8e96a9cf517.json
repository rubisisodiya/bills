{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Rubi Singh\\\\meanstark\\\\nodeexpress\\\\billing\\\\my-app\\\\src\\\\components\\\\Products\\\\ProductsList.js\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { startAddProduct, startRemoveProduct, startUpdateProduct, startListProducts } from '../../actions/product';\nimport ProductForm from './ProductForm';\nimport Add from '@material-ui/icons/Add';\nimport Modal from 'react-modal';\nimport modalStyles from '../../config/modalCss';\nimport IconButton from '@material-ui/core/IconButton';\nimport Swal from 'sweetalert2';\nimport axios from '../../config/axios';\n\nclass ProductList extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.productDelete = e => {\n      const id = e.target.value;\n      this.props.dispatch(startRemoveProduct(id));\n    };\n\n    this.closeModal = () => {\n      this.setState({\n        modalIsOpen: false\n      });\n    };\n\n    this.modalOpen = () => {\n      this.setState({\n        modalIsOpen: true\n      });\n    };\n\n    this.productPost = data => {\n      this.props.dispatch(startAddProduct(data));\n    };\n\n    this.productUpdate = e => {\n      e.preventDefault();\n      this.setState({\n        isEdit: true,\n        product: this.props.products.find(product => product._id === e.target.id)\n      });\n    };\n\n    this.productPut = data => {\n      const id = data._id;\n      this.props.dispatch(startUpdateProduct(id, data, this.props.history));\n    };\n\n    this.handleChange = e => {\n      e.persist();\n      this.setState(prevState => {\n        return {\n          product: { ...prevState.product,\n            [e.target.name]: e.target.value\n          }\n        };\n      });\n    };\n\n    this.updateProduct = data => {\n      // console.log(data)\n      axios.put(`/products/edit/${data._id}`, data, {\n        headers: {\n          'x-auth': localStorage.getItem('authToken')\n        }\n      }).then(res => {\n        if (res.data.errors) {\n          Swal.fire({\n            type: 'error',\n            text: 'Check the fileds'\n          });\n        } else {\n          this.setState({\n            product: {}\n          });\n          this.props.dispatch(startListProducts());\n        }\n      }).catch(err => {\n        Swal.fire({\n          type: 'error',\n          text: err\n        });\n      });\n    };\n\n    this.state = {\n      modalIsOpen: false,\n      isEdit: false,\n      product: {}\n    };\n  }\n\n  render() {\n    const {\n      modalIsOpen\n    } = this.state;\n    Modal.setAppElement('#root');\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Modal, {\n      style: modalStyles,\n      isOpen: modalIsOpen // onAfterOpen={this.afterOpenModal}\n      ,\n      onRequestClose: this.closeModal,\n      \"aria-labelledBy\": \"Create Product\",\n      \"aria-describedBy\": \"simple-modal-description\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(ProductForm, {\n      productPost: this.productPost,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 11\n      }\n    })), /*#__PURE__*/React.createElement(IconButton, {\n      className: \"tableButton\",\n      onClick: this.modalOpen,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Add, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 11\n      }\n    })), /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }\n    }, \"Products \"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 9\n      }\n    }, this.props.products.map((product, index) => {\n      // return <li key={index}> {product.name}</li>\n      return /*#__PURE__*/React.createElement(\"div\", {\n        key: index,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card\",\n        style: {\n          width: '18rem'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card-body product-body\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 19\n        }\n      }, this.state.product._id === product._id ? /*#__PURE__*/React.createElement(ProductForm, Object.assign({\n        productPut: this.updateProduct,\n        isEdit: this.state.isEdit\n      }, product, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 23\n        }\n      })) : /*#__PURE__*/React.createElement(\"div\", {\n        className: \"product-card\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"h5\", {\n        className: \"card-title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 25\n        }\n      }, product.name), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 25\n        }\n      }, \"Description: \", product.description), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"em\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 28\n        }\n      }, /*#__PURE__*/React.createElement(\"b\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 32\n        }\n      }, \"Price:\")), \" \", product.price), /*#__PURE__*/React.createElement(\"button\", {\n        className: \"btn btn-sm btn-info\",\n        id: product._id,\n        onClick: this.productUpdate,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 25\n        }\n      }, \"Edit\"), /*#__PURE__*/React.createElement(\"button\", {\n        className: \"btn btn-sm btn-danger\",\n        value: product._id,\n        onClick: this.productDelete,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 25\n        }\n      }, \"Delete\")))));\n    })));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  // console.log('state',state)\n  return {\n    categories: state.categories,\n    products: state.products\n  };\n};\n\nexport default connect(mapStateToProps)(ProductList);","map":{"version":3,"sources":["C:/Users/Rubi Singh/meanstark/nodeexpress/billing/my-app/src/components/Products/ProductsList.js"],"names":["React","connect","startAddProduct","startRemoveProduct","startUpdateProduct","startListProducts","ProductForm","Add","Modal","modalStyles","IconButton","Swal","axios","ProductList","Component","constructor","props","productDelete","e","id","target","value","dispatch","closeModal","setState","modalIsOpen","modalOpen","productPost","data","productUpdate","preventDefault","isEdit","product","products","find","_id","productPut","history","handleChange","persist","prevState","name","updateProduct","put","headers","localStorage","getItem","then","res","errors","fire","type","text","catch","err","state","render","setAppElement","map","index","width","description","price","mapStateToProps","categories"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { connect } from 'react-redux'\nimport {\n  startAddProduct,\n  startRemoveProduct,\n  startUpdateProduct,\n  startListProducts,\n} from '../../actions/product'\nimport ProductForm from './ProductForm'\nimport Add from '@material-ui/icons/Add'\nimport Modal from 'react-modal'\nimport modalStyles from '../../config/modalCss'\nimport IconButton from '@material-ui/core/IconButton'\nimport Swal from 'sweetalert2'\nimport axios from '../../config/axios'\n\nclass ProductList extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      modalIsOpen: false,\n      isEdit: false,\n      product: {},\n    }\n  }\n  productDelete = (e) => {\n    const id = e.target.value\n    this.props.dispatch(startRemoveProduct(id))\n  }\n  closeModal = () => {\n    this.setState({ modalIsOpen: false })\n  }\n  modalOpen = () => {\n    this.setState({ modalIsOpen: true })\n  }\n  // this.Modal.setAppElement('#root')\n  productPost = (data) => {\n    this.props.dispatch(startAddProduct(data))\n  }\n  productUpdate = (e) => {\n    e.preventDefault()\n    this.setState({\n      isEdit: true,\n      product: this.props.products.find(\n        (product) => product._id === e.target.id\n      ),\n    })\n  }\n  productPut = (data) => {\n    const id = data._id\n    this.props.dispatch(startUpdateProduct(id, data, this.props.history))\n  }\n  handleChange = (e) => {\n    e.persist()\n    this.setState((prevState) => {\n      return {\n        product: {\n          ...prevState.product,\n          [e.target.name]: e.target.value,\n        },\n      }\n    })\n  }\n  updateProduct = (data) => {\n    // console.log(data)\n    axios\n      .put(`/products/edit/${data._id}`, data, {\n        headers: {\n          'x-auth': localStorage.getItem('authToken'),\n        },\n      })\n      .then((res) => {\n        if (res.data.errors) {\n          Swal.fire({\n            type: 'error',\n            text: 'Check the fileds',\n          })\n        } else {\n          this.setState({ product: {} })\n          this.props.dispatch(startListProducts())\n        }\n      })\n      .catch((err) => {\n        Swal.fire({\n          type: 'error',\n          text: err,\n        })\n      })\n  }\n  render() {\n    const { modalIsOpen } = this.state\n    Modal.setAppElement('#root')\n    return (\n      <>\n        <Modal\n          style={modalStyles}\n          isOpen={modalIsOpen}\n          // onAfterOpen={this.afterOpenModal}\n          onRequestClose={this.closeModal}\n          aria-labelledBy='Create Product'\n          aria-describedBy='simple-modal-description'\n        >\n          <ProductForm productPost={this.productPost} />\n        </Modal>\n        <IconButton className='tableButton' onClick={this.modalOpen}>\n          <Add />\n        </IconButton>\n        <h3>Products </h3>\n        <div className='row'>\n          {this.props.products.map((product, index) => {\n            // return <li key={index}> {product.name}</li>\n            return (\n              <div key={index}>\n                <div className='card' style={{ width: '18rem' }}>\n                  <div className='card-body product-body'>\n                    {this.state.product._id === product._id ? (\n                      <ProductForm\n                        productPut={this.updateProduct}\n                        isEdit={this.state.isEdit}\n                        {...product}\n                      />\n                    ) : (\n                      <div className='product-card'>\n                        <h5 className='card-title'>{product.name}</h5>\n                        <p>Description: {product.description}</p>\n                        <p><em><b>Price:</b></em> {product.price}</p>\n                        <button\n                          className='btn btn-sm btn-info'\n                          id={product._id}\n                          onClick={this.productUpdate}\n                        >\n                          Edit\n                        </button>\n                        <button\n                          className='btn btn-sm btn-danger'\n                          value={product._id}\n                          onClick={this.productDelete}\n                        >\n                          Delete\n                        </button>\n                      </div>\n                    )}\n                  </div>\n                </div>\n              </div>\n            )\n          })}\n        </div>\n      </>\n    )\n  }\n}\n\nconst mapStateToProps = (state) => {\n  // console.log('state',state)\n  return {\n    categories: state.categories,\n    products: state.products,\n  }\n}\n\nexport default connect(mapStateToProps)(ProductList)\n"]},"metadata":{},"sourceType":"module"}